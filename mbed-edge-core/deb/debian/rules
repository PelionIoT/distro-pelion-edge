#!/usr/bin/make -f

# Uncomment this to turn on verbose mode.
# export DH_VERBOSE = 1

%:
	dh $@ --builddirectory=build/ --with systemd

override_dh_auto_configure:
	dh_auto_configure -- -DDEVELOPER_MODE=ON -DFIRMWARE_UPDATE=OFF

override_dh_clean:
	dh_testdir

	rm -rf build/*

	find . -name '-I' -exec rm -rf {} +

	if [ -f compilation_info.txt ]; then \
		rm -rf compilation_info.txt;     \
	fi

	if [ -f config/edge_version_info.h ]; then \
		rm -f config/edge_version_info.h;      \
	fi

	dh_clean

override_dh_auto_install:
	echo Not needed in our case

override_dh_installinit:
	dh_installinit --name=edge-core edge-core.init

override_dh_systemd_enable:
	dh_systemd_enable --name=edge-core edge-core.service

override_dh_systemd_start:
	dh_systemd_start --name=edge-core edge-core.service
